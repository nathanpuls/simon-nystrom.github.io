{"pageProps":{"post":{"html":"<p>The blog where you&#39;re reading this is built using the tools mentioned in this post. It&#39;s not a replica but it has a similar setup, just more focused on the blog setup. This post will guide you through the process of creating your own blog by combining <a href=\"https://svelte.dev/\">Svelte</a>, <a href=\"https://sapper.svelte.dev/\">Sapper</a> and <a href=\"https://www.github.com\">GitHub</a> Pages (free). The focus will be on creating a blog with these tools and not so much the details of Svelte and Sapper.</p>\n<p>Note that even though this project will use GitHub pages as its deployment method, it is in no way required to be deployed to GitHub pages. There is a clear decoupling of the blog itself and its method of deployment.</p>\n<hr>\n<h1 id=\"project-setup\">Project setup</h1>\n<p>To follow along with the blog you will need to have the following:</p>\n<ul>\n<li><code>node</code> 8.2.0 or later (for <code>npx</code> support)</li>\n<li>A GitHub account</li>\n<li>An empty (uninitialized) GitHub public repository named <em>username</em>.github.io where <em>username</em> is your username at GitHub</li>\n<li>Access to your GitHub account through the terminal</li>\n</ul>\n<p>When you&#39;re all set up and ready to go, let&#39;s begin. Begin by running the following commands in a terminal window (replace <code>&lt;username&gt;</code> by your GitHub username):</p>\n<pre><div class=\"copy-me\" onclick=\"copyCode(this)\">Copy</div><code>npx degit <span class=\"hljs-string\">&quot;sveltejs/sapper-template#rollup&quot;</span> &lt;username&gt;.github.io\n<span class=\"hljs-built_in\">cd</span> &lt;username&gt;.github.io\nnpm install</code></pre><p>This will execute <a href=\"https://github.com/Rich-Harris/degit\"><code>degit</code></a> with <code>npx</code> to scaffold a Sapper template project in a folder called <code>&lt;username&gt;.github.io</code> and change your working directory into said folder and install the required <code>npm</code> dependencies.</p>\n<p>If you want to see what your site looks like at this point, you can go ahead and run:</p>\n<pre><div class=\"copy-me\" onclick=\"copyCode(this)\">Copy</div><code>npm run dev</code></pre><p>This will start the local development server at <a href=\"http://localhost:3000\">http://localhost:3000</a>.</p>\n<p>Now it&#39;s time to open the project in your favorite code editor. You should have a folder structure similar to the image below at this point:</p>\n<p><img src=\"/images/sapper/sapper_folder_structure.png\" alt=\"Folder structure\"></p>\n<p>The files/folders that we will be interacting with are listed below:</p>\n<ul>\n<li><code>__sapper__</code>, Sapper files such as the dev, build and export bundles.</li>\n<li><code>src</code> the source code for the site</li>\n<li><code>static</code> resources needed for the page to run, these are included in the built version</li>\n</ul>\n<p>You can run the following command if you&#39;d like to clean up the project a bit (removing files we won&#39;t be using) so that it contains fewer files as we start to modify the template to suit our needs. Make sure your working directory is still set to <code>&lt;username&gt;.github.io</code>.</p>\n<pre><div class=\"copy-me\" onclick=\"copyCode(this)\">Copy</div><code>rm -r scripts static/*.png static/*.jpg</code></pre><p>Since this blog post is focused on enabling blogging functionality, let&#39;s simplify our site a some more. Remove the list item containing the link to <strong>about</strong> in the <code>src/components/Nav.svelte</code> file and delete the file <code>src/routes/about.svelte</code>. Your site should now only have two items in the nav bar, like the image below:</p>\n<p><img src=\"/images/sapper/sapper_nav_bar.png\" alt=\"Nav bar\"></p>\n<p>Now would also be a great time to personalize the <code>src/routes/index.svelte</code> file. I will leave it as it is and move on to the blog portion of the site.</p>\n<hr>\n<h1 id=\"enabling-markdown-support\">Enabling Markdown support</h1>\n<p>As it stands, the blog posts and their content is hard coded and static, located inside the <code>src/routes/blog/_posts.js</code> file and aren&#39;t able to be written in <a href=\"https://en.wikipedia.org/wiki/Markdown\">Markdown</a> just yet. To change that, we&#39;ll need to install some extra libraries that can help us convert Markdown files into a format suitable to us:</p>\n<pre><div class=\"copy-me\" onclick=\"copyCode(this)\">Copy</div><code>npm install -D marked highlight.js front-matter</code></pre><p>We also need to add a CSS theme to make <code>highlight.js</code> do something, go to <a href=\"https://highlightjs.org/static/demo/\">https://highlightjs.org/static/demo/</a> and pick a theme and then include it in the <code>src/template.html</code> like so:</p>\n<pre><div class=\"copy-me\" onclick=\"copyCode(this)\">Copy</div><code><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span>\n  <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;stylesheet&quot;</span>\n  <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css&quot;</span>\n/&gt;</span></code></pre><p>I like keeping my blog posts separate from the code itself since they should be independent of where they are rendered vice versa. Let&#39;s create a <code>posts</code> directory alongside our <code>src</code> and <code>static</code> folders.</p>\n<p>Now we can start rewriting <code>src/routes/blog/_posts.js</code> to suit our needs. We&#39;ll write some code that can take a Markdown file, including YAML front matter and parse it into something that can be used programmatically. You can replace the contents in <code>src/routes/blog/_posts.js</code> with the following code:</p>\n<pre><div class=\"copy-me\" onclick=\"copyCode(this)\">Copy</div><code><span class=\"hljs-comment\">// src/routes/blog/_posts.js</span>\n\n<span class=\"hljs-keyword\">const</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;fs&quot;</span>);\n<span class=\"hljs-keyword\">const</span> fm = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;front-matter&quot;</span>);\n<span class=\"hljs-keyword\">const</span> marked = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;marked&quot;</span>);\n<span class=\"hljs-keyword\">const</span> hljs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&quot;highlight.js&quot;</span>);\n\n<span class=\"hljs-keyword\">const</span> files = fs.readdirSync(<span class=\"hljs-string\">&quot;posts&quot;</span>);\n\n<span class=\"hljs-comment\">// Use highlight.js as the highlighter for the marked library</span>\nmarked.setOptions({\n  <span class=\"hljs-attr\">highlight</span>: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">code, lang</span>) </span>{\n    <span class=\"hljs-keyword\">return</span> hljs.highlight(lang, code).value;\n  },\n});\n\n<span class=\"hljs-keyword\">const</span> posts = [];\n<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">let</span> i = <span class=\"hljs-number\">0</span>; i &lt; files.length; i++) {\n  <span class=\"hljs-keyword\">const</span> content = fs.readFileSync(<span class=\"hljs-string\">`posts/<span class=\"hljs-subst\">${files[i]}</span>`</span>, { <span class=\"hljs-attr\">encoding</span>: <span class=\"hljs-string\">&quot;utf-8&quot;</span> });\n  <span class=\"hljs-comment\">// Use the front-matter library to separate the body from the front matter</span>\n  <span class=\"hljs-keyword\">const</span> { body, ...frontMatter } = fm(content);\n  <span class=\"hljs-comment\">// Use the marked library to turn markdown into html</span>\n  <span class=\"hljs-keyword\">const</span> html = marked(body);\n  posts.push({ html, ...frontMatter.attributes });\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> posts;</code></pre><p>The code above will read the contents of the posts located in the <code>posts</code> folder and create an array of the posts and their contents so that we can access these posts programmatically.</p>\n<hr>\n<h1 id=\"creating-your-first-post\">Creating your first post</h1>\n<p>Now that we&#39;ve prepared the code to parse our Markdown files, we can create our first post. Create a file in the <code>posts</code> folder we created earlier called <code>my-first-blog.md</code> with the following content:</p>\n<pre><div class=\"copy-me\" onclick=\"copyCode(this)\">Copy</div><code>---\ntitle: \"My first blog post\"\nslug: \"my-first-blog\"\n---\n\n## Look at the `title` above, it's straight out of the front matter! â†–\n\nThe slug is what's used to navigate/link to this specific post, visible right now in the URL.\n</code></pre><p>Now you should be able to restart the local development server by re-running <code>npm run dev</code>. Now visit <a href=\"http://localhost:3000/blog\">http://localhost:3000/blog</a> and see your newly created post in the list of recent posts, click the link and it should navigate you to the post.</p>\n<hr>\n<h1 id=\"deploying-to-github-pages\">Deploying to GitHub Pages</h1>\n<p>First, we need to make our project into a Git repository and push it to GitHub. To do this, we&#39;ll initialize our current directory (should still be <code>&lt;username&gt;.github.io</code>) as a Git repository, stage all the files and create our first commit. Finally we also need to push it to GitHub:</p>\n<pre><div class=\"copy-me\" onclick=\"copyCode(this)\">Copy</div><code>git init\ngit add .\ngit commit -m \"Initial commit\"\ngit remote add origin https://github.com/temporary-duck/<username>.io.git\ngit push -u origin master</code></pre><p>Once that&#39;s done, we&#39;ll install one final dependency to make it easy for us to deploy the site:</p>\n<pre><div class=\"copy-me\" onclick=\"copyCode(this)\">Copy</div><code>npm install -D gh-pages</code></pre><p>We&#39;ll also add this as a new script called <code>deploy</code> to our <code>package.json</code>&#39;s <code>scripts</code> section:</p>\n<pre><div class=\"copy-me\" onclick=\"copyCode(this)\">Copy</div><code>&quot;scripts&quot;: {\n    &quot;dev&quot;: &quot;sapper dev&quot;,\n    &quot;build&quot;: &quot;sapper build --legacy&quot;,\n    &quot;export&quot;: &quot;sapper export --legacy&quot;,\n    &quot;start&quot;: &quot;node __sapper__/build&quot;,\n    &quot;deploy&quot;: &quot;sapper export --legacy &amp;&amp;  gh-pages -d __sapper__/export&quot;\n},</code></pre><p>The new script will make sure that we <code>sapper export</code> our latest changes before deploying the <code>__sapper__/export</code> folder to GitHub Pages. <code>gh-pages</code> will create a branch in our repository called <code>gh-pages</code> and this branch is what will be deployed to your site at <code>&lt;username&gt;.github.io</code>, where username is your username at GitHub.</p>\n<p>Now you&#39;re all set to simply deploy the site by running:</p>\n<pre><div class=\"copy-me\" onclick=\"copyCode(this)\">Copy</div><code>npm run deploy</code></pre><p>We&#39;re close to being done now, only one step left. We have to set the <code>gh-pages</code> branch that was just deployed as the main branch for GitHub Pages to read from. To do this, visit the GitHub repository you created for your blog, go to settings and scroll down until you see the <strong>GitHub Pages</strong> section. Under <strong>Source</strong> you have to change the branch to the <code>gh-pages</code> branch. It might take a few minutes until your page is correctly deployed to <code>&lt;username&gt;.github.io</code>.</p>\n<p>That&#39;s it. All done. Enjoy your newly created and freely hosted blog! ðŸ¥³</p>\n<hr>\n","date":"2020-09-27","title":"Creating a blog with Svelte, Sapper and GitHub Pages","slug":"create-markdown-sapper-svelte-blog","summary":"Learn how to create your own blog using Svelte, Sapper, Markdown and how to host it for free on GitHub Pages.","categories":[],"published":true,"tags":["svelte","sapper","markdown","javascript","blog","github","rollup"]}},"__N_SSG":true}